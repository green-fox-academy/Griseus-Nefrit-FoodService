@model ShoppingCartRequest

<h3>Basket</h3>
@{
    ViewData["Title"] = "Submit";
    //ViewData["Action"] = "Edit";
    //await Html.RenderPartialAsync("_RestaurantPartial");
}

<br />
<h3>Content of your shopping cart</h3>
<br />
<br />

    <table class="table">
        <thead class="thead-dark">
            <tr>
                <th>ID</th>
                <th>NAME</th>
                <th>QUANTITY</th>
                <th>PRICE</th>
                <th>EDIT</th>
                <th>DELETE</th>
                <th>PHOTO</th>
            </tr>
        </thead>
        @{
            int totalPrice = 0;
        }
        @foreach (var cartItem in Model.CartItems)
        {
            <tr>
                <td>@cartItem.CartItemId</td>
                <td>@cartItem.Meal.Name</td>
                <td>@cartItem.Quantity</td>
                @{
                    int sumPrice = cartItem.Meal.Price.Amount * cartItem.Quantity;
                    totalPrice += sumPrice;
                }
                <td>@sumPrice @cartItem.Meal.Price.Currency</td>
                <td>
                    <form asp-controller="Order" asp-action="Edit" method="get" asp-route-Id="@cartItem.CartItemId">
                        <button type="submit" class="btn btn-success">Edit</button>
                    </form>
                </td>
                <td>
                    <form asp-controller="Order" asp-action="Delete" method="post" asp-route-Id="@cartItem.CartItemId">
                        <button type="submit" class="btn btn-danger">Delete</button>
                    </form>
                </td>
                <td><img src=@cartItem.Meal.ImageUri width="100" height="100"></td>
            </tr>
        }
        <tfoot>
            <tr>
                <td></td>
                <td>Total Price</td>
                <td></td>
                <td>@totalPrice</td>
                <td></td>
                <td></td>
                <td></td>
            </tr>
        </tfoot>

    </table>
    <form asp-controller="Order" asp-action="Submit" method="post" asp-route-id="@Model.ShoppingCartId">
        <div class="form-group">
            <label asp-for="Address.Country">Country</label>
            <input type="text" asp-for="Address.Country" class="form-control" />
            <span asp-validation-for="Address.Country" class="text-danger"></span>
        </div>
        <div class="form-group">
            <label asp-for="Address.City">City</label>
            <input type="text" asp-for="Address.City" class="form-control" />
            <span asp-validation-for="Address.City" class="text-danger"></span>
        </div>
        <div class="form-group">
            <label asp-for="Address.ZipCode">City</label>
            <input type="text" asp-for="Address.ZipCode" class="form-control" />
            <span asp-validation-for="Address.ZipCode" class="text-danger"></span>
        </div>
        <div class="form-group">
            <label asp-for="Address.Street">Street address</label>
            <input type="text" asp-for="Address.Street" class="form-control" />
            <span asp-validation-for="Address.Street" class="text-danger"></span>
        </div>
        <button type="submit" class="btn btn-primary">Submit Order</button>
        <button type="button" class="btn btn-info" onclick="history.back()">Cancel</button>
    </form>
