@using Microsoft.EntityFrameworkCore.Internal
@model CurrentOrderViewModel

<h1>Current Orders</h1><br />
@if (!Model.RestaurantsOfManager.Any())
{
    <h4>You don't have any restaurant added to your account.</h4>
}
@foreach (var restaurant in Model.RestaurantsOfManager)
{
    if (Model.Orders.Where(o => o.Restaurant.RestaurantId == restaurant.RestaurantId).ToList().Count != 0)
    {
        <h4>@restaurant.Name</h4>
        <table class="table">
            <thead class="thead-light">
            <tr>
                <th scope="col">Order ID</th>
                <th scope="col">Items</th>
                <th scope="col">Date and time of the order</th>
            </tr>
            </thead>
            <tbody>
            @foreach (var order in Model.Orders)
            {
                if (restaurant.RestaurantId == order.Restaurant.RestaurantId)
                {
                    <tr>
                        <td>@order.OrderId</td>
                        <td>
                            <ul>
                                @for (int i = 0; i < order.CartItems.Count; i++)
                                {
                                    <li>@order.CartItems[i].Meal.Name</li>
                                    <br/>
                                }
                            </ul>
                        </td>
                        <td>@order.DateSubmitted</td>
                    </tr>
                }
            }
            </tbody>
        </table>
    }
}